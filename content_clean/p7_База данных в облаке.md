–ü—Ä–æ–µ–∫—Ç: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –æ–±–ª–∞–∫–µ

–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—É—é PostgreSQL-–±–∞–∑—É –≤ –æ–±–ª–∞–∫–µ, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é. –≠—Ç–æ –∏–º–∏—Ç–∏—Ä—É–µ—Ç production-—Å—Ü–µ–Ω–∞—Ä–∏–π —Å —É–ø—Ä–∞–≤–ª—è–µ–º–æ–π –∏–ª–∏ self-hosted –ë–î.

üîß –≠—Ç–∞–ø—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. –í—ã–±–æ—Ä –ø–æ–¥—Ö–æ–¥–∞
- –í–∞—Ä–∏–∞–Ω—Ç A (Managed): –∏—Å–ø–æ–ª—å–∑—É–π managed-—Å–µ—Ä–≤–∏—Å (Yandex Managed PostgreSQL, AWS RDS, GCP Cloud SQL)  
  ‚Üí –ü—Ä–æ—â–µ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã, failover ¬´–∏–∑ –∫–æ—Ä–æ–±–∫–∏¬ª  
- –í–∞—Ä–∏–∞–Ω—Ç B (Self-hosted): —Ä–∞–∑–≤–µ—Ä–Ω–∏ PostgreSQL –Ω–∞ –í–ú —á–µ—Ä–µ–∑ Terraform + Ansible  
  ‚Üí –ë–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è, –Ω–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤—Å—ë –≤—Ä—É—á–Ω—É—é

–î–ª—è –æ–±—É—á–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –í–∞—Ä–∏–∞–Ω—Ç B, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–æ—Å—Ç–∏.

üí° –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç:
> - –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –ë–î –≤ –æ–±–ª–∞–∫–µ
- –ù–∞—Å—Ç—Ä–æ–π–∫—É —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º  
‚Äî –≤—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è production-—Å–∏—Å—Ç–µ–º—ã.

‚ö†Ô∏è –°–æ–≤–µ—Ç—ã

- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –í–∫–ª—é—á–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–∞–∂–µ –ø—Ä–∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏!)
- –î–ª—è production ‚Äî —Ä–∞—Å—Å–º–æ—Ç—Ä–∏ Patroni –∏–ª–∏ managed-—Å–µ—Ä–≤–∏—Å

–°–Ω–æ—Å–∫–∏

[^replication]: Streaming replication –≤ PostgreSQL –ø–µ—Ä–µ–¥–∞—ë—Ç WAL-–∑–∞–ø–∏—Å–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. Replica –º–æ–∂–µ—Ç –æ—Ç—Å—Ç–∞–≤–∞—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ (asynchronous).
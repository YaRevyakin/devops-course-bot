–†–∞–±–æ—Ç–∞ —Å –±–∞–∑–∞–º–∏

DevOps-–∏–Ω–∂–µ–Ω–µ—Ä –Ω–µ –ø–∏—à–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É, –Ω–æ –¥–æ–ª–∂–µ–Ω —É–º–µ—Ç—å —É–ø—Ä–∞–≤–ª—è—Ç—å, –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏, –±—ç–∫–∞–ø–æ–≤, –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –æ—Å–Ω–æ–≤ SQL.
üîë –û—Å–Ω–æ–≤—ã SQL –¥–ª—è DevOps

DDL (Data Definition Language) ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏—è—Ö, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö —Å—Ö–µ–º—ã.

DML (Data Manipulation Language) ‚Äî –¥–∞–Ω–Ω—ã–µ

‚Üí –ù—É–∂–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏, –æ—á–∏—Å—Ç–∫–∏, –∞–Ω–∞–ª–∏–∑–∞.

–ò–Ω–¥–µ–∫—Å—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

- –ò–Ω–¥–µ–∫—Å —É—Å–∫–æ—Ä—è–µ—Ç –ø–æ–∏—Å–∫ –ø–æ –ø–æ–ª—é:

- –ë–µ–∑ –∏–Ω–¥–µ–∫—Å–∞ ‚Äî full scan (–º–µ–¥–ª–µ–Ω–Ω–æ –Ω–∞ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö)
- –ù–æ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–æ–≤ ‚Üí –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ INSERT/UPDATE

–ü—Ä–æ–≤–µ—Ä—è–π –ø–ª–∞–Ω –∑–∞–ø—Ä–æ—Å–∞:

üîÑ –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–∏–ø—ã —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏

- Master-Slave (Read Replicas)  
    ‚Üí –ó–∞–ø–∏—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞ master, —á—Ç–µ–Ω–∏–µ ‚Äî —Å —Ä–µ–ø–ª–∏–∫  
    ‚Üí –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —á—Ç–µ–Ω–∏—è
- Master-Master  
    ‚Üí –ó–∞–ø–∏—Å—å –Ω–∞ –ª—é–±–æ–π —É–∑–µ–ª  
    ‚Üí –°–ª–æ–∂–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è, —Ä–∏—Å–∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, Patroni + etcd –¥–ª—è PostgreSQL)  
    ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π failover, –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∑–∞–ø–∏—Å–∏
–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

- –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ –∫–ª—é—á—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ user_id)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ MongoDB, Cassandra, Citus (PostgreSQL)

–í –æ–±–ª–∞–∫–µ: –∏—Å–ø–æ–ª—å–∑—É–π managed-—Å–µ—Ä–≤–∏—Å—ã (RDS, Cloud SQL) ‚Äî –æ–Ω–∏ —É–∂–µ –≤–∫–ª—é—á–∞—é—Ç —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –∏ failover.

üíæ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

–ú–µ—Ç–æ–¥—ã

- –õ–æ–≥–∏—á–µ—Å–∫–∏–π –¥–∞–º–ø: pg_dump, mysqldump  
    ‚Üí –ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω—ã–π –¥–ª—è –±–æ–ª—å—à–∏—Ö –ë–î
- –§–∏–∑–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø: pg_basebackup, xtrabackup  
    ‚Üí –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö ‚Üí –±—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- WAL / Binlog –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ  
    ‚Üí –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –ª—é–±—É—é —Å–µ–∫—É–Ω–¥—É (point-in-time recovery)
–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

- –ë—ç–∫–∞–ø—ã –µ–∂–µ–¥–Ω–µ–≤–Ω–æ + WAL/binlog –∫–∞–∂–¥—ã–µ 5‚Äì15 –º–∏–Ω
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ –æ–±—ä–µ–∫—Ç–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (S3, Yandex Object Storage)
- –†–µ–≥—É–ª—è—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
‚ö†Ô∏è –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

- ‚ùå ¬´–ë—ç–∫–∞–ø —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ¬ª  
    ‚Üí –ü—Ä–∏ RPO = 1 —á–∞—Å ‚Äî –Ω–µ–¥–µ–ª—è –Ω–µ–ø—Ä–∏–µ–º–ª–µ–º–∞.
- ‚ùå ¬´–ò–Ω–¥–µ–∫—Å –Ω–∞ –≤—Å—ë –ø–æ–¥—Ä—è–¥¬ª  
    ‚Üí –ó–∞–º–µ–¥–ª—è–µ—Ç –∑–∞–ø–∏—Å—å, –∑–∞–Ω–∏–º–∞–µ—Ç –º–µ—Å—Ç–æ.
- ‚ùå ¬´–†–µ–ø–ª–∏–∫–∞—Ü–∏—è = –±—ç–∫–∞–ø¬ª  
    ‚Üí –†–µ–ø–ª–∏–∫–∞ –∫–æ–ø–∏—Ä—É–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –≤–∫–ª—é—á–∞—è DROP TABLE. –≠—Ç–æ –Ω–µ –∑–∞—â–∏—Ç–∞ –æ—Ç —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏.
üí° –ì–ª–∞–≤–Ω–æ–µ

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî —Å–µ—Ä–¥—Ü–µ —Å–∏—Å—Ç–µ–º—ã.  
DevOps –¥–æ–ª–∂–µ–Ω –æ–±–µ—Å–ø–µ—á–∏—Ç—å –µ—ë:
> - –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å (–±—ç–∫–∞–ø—ã, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è)
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–∏–Ω–¥–µ–∫—Å—ã, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (—Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –≤–Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞)

–°–Ω–æ—Å–∫–∏

[^pit-recovery]: Point-in-Time Recovery (PITR) ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ —Å –ø–æ–º–æ—â—å—é –ª–æ–≥–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.
---
tags: [mod15]
---
# Optimization –æ–±–ª–∞—á–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç –≤ –æ–±–ª–∞–∫–µ ‚Äî —ç—Ç–æ –Ω–µ —Ä–∞–∑–æ–≤–∞—è —ç–∫–æ–Ω–æ–º–∏—è, –∞ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∫–æ–Ω—Ç—Ä–æ–ª—è, –∞–Ω–∞–ª–∏–∑–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å—é –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å—é.

## üîë –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **–¢–∏–ø—ã –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤**  
  On-demand (–¥–æ—Ä–æ–≥–æ, –Ω–∞–¥—ë–∂–Ω–æ), Reserved (—Å–∫–∏–¥–∫–∞ –∑–∞ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É), Spot (–¥–æ 90% –¥–µ—à–µ–≤–ª–µ, –Ω–æ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–æ–∑–≤–∞–Ω—ã).
- **Autoscaling**  
  Horizontal Pod Autoscaler (HPA), Vertical Pod Autoscaler (VPA), Cluster Autoscaler ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—é—Ç —Ä–µ—Å—É—Ä—Å—ã –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫—É.
- **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ requests/limits**  
  –ó–∞–≤—ã—à–µ–Ω–Ω—ã–µ –ª–∏–º–∏—Ç—ã = –ø–µ—Ä–µ–ø–ª–∞—Ç–∞. –ó–∞–Ω–∏–∂–µ–Ω–Ω—ã–µ = –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å. –ò—Å–ø–æ–ª—å–∑—É–π `kubectl top` –∏ VPA –¥–ª—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏.
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–Ω–∞–ª–∏–∑–∞**  
  AWS Cost Explorer, GCP Billing Reports, Kubecost / OpenCost ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –∫—É–¥–∞ —É—Ö–æ–¥—è—Ç –¥–µ–Ω—å–≥–∏ –ø–æ namespace, pod, —Å–µ—Ä–≤–∏—Å—É.
- **–£–±–æ—Ä–∫–∞ "–º—É—Å–æ—Ä–∞"**  
  –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–æ–º–∞, IP-–∞–¥—Ä–µ—Å–∞, —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–∑—ã, idle-–∫–ª–∞—Å—Ç–µ—Ä—ã ‚Äî —á–∞—Å—Ç–∞—è –ø—Ä–∏—á–∏–Ω–∞ —Å–∫—Ä—ã—Ç—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤.
## ‚öôÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–º–µ—Å—Ç–µ?

1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—à—å **Kubecost** –≤ –∫–ª–∞—Å—Ç–µ—Ä ‚Üí –æ–Ω —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–∏ CPU, RAM, storage.
2. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—à—å **–µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á—ë—Ç** –ø–æ —Ç—Ä–∞—Ç–∞–º –ø–æ –∫–æ–º–∞–Ω–¥–∞–º/–ø—Ä–æ–µ–∫—Ç–∞–º.
3. –í—ã—è–≤–ª—è–µ—à—å **over-provisioned** –ø–æ–¥—ã ‚Äî —Å–Ω–∏–∂–∞–µ—à—å requests/limits.
4. –ü–µ—Ä–µ–≤–æ–¥–∏—à—å stateless-–Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ **Spot-–∏–Ω—Å—Ç–∞–Ω—Å—ã** —Å fallback –Ω–∞ on-demand.
5. –í–∫–ª—é—á–∞–µ—à—å **Cluster Autoscaler** ‚Äî –∫–ª–∞—Å—Ç–µ—Ä —Å–∞–º –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É.
6. –†–∞–∑ –≤ –º–µ—Å—è—Ü ‚Äî **–∞—É–¥–∏—Ç —Ä–µ—Å—É—Ä—Å–æ–≤**: —É–¥–∞–ª—è–µ—à—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ.

‚Üí –ë–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—è ‚Äî –±—é–¥–∂–µ—Ç —Ä–∞—Å—Ç—ë—Ç –ª–∏–Ω–µ–π–Ω–æ. –° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π ‚Äî —Ç—ã –ø–ª–∞—Ç–∏—à—å —Ç–æ–ª—å–∫–æ –∑–∞ —Ç–æ, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
## ‚ö†Ô∏è –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

- ‚ùå ¬´–Ø –ø–æ—Å—Ç–∞–≤–∏–ª limits = 8 CPU ‚Äî —á—Ç–æ–±—ã —Ç–æ—á–Ω–æ —Ö–≤–∞—Ç–∏–ª–æ¬ª  
  ‚Üí –≠—Ç–æ —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç 8 CPU, –¥–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 0.1. –ü–ª–∞—Ç–∏—à—å –∑–∞ –ø—Ä–æ—Å—Ç–æ–π.
- ‚ùå ¬´–ù–µ –≤–∫–ª—é—á–∏–ª autoscaling ‚Äî –∫–ª–∞—Å—Ç–µ—Ä –≤—Å–µ–≥–¥–∞ –≤ —Ä–µ–∂–∏–º–µ –ø–∏–∫–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏¬ª  
  ‚Üí –ù–æ—á—å—é –ø–ª–∞—Ç–∏—à—å –∑–∞ 100 –Ω–æ–¥, —Ö–æ—Ç—è –Ω—É–∂–Ω–æ 10.
- ‚ùå ¬´–ó–∞–±—ã–ª –ø—Ä–æ EBS-—Ç–æ–º–∞ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞¬ª  
  ‚Üí –û–Ω–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Å–ø–∏—Å—ã–≤–∞—Ç—å –¥–µ–Ω—å–≥–∏ –º–µ—Å—è—Ü–∞–º–∏.
## üí° –ì–ª–∞–≤–Ω–æ–µ

> –û–±–ª–∞–∫–æ ‚Äî —ç—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã, –∞ –Ω–µ –∫–∞–ø–∏—Ç–∞–ª—å–Ω—ã–µ.  
> –•–æ—Ä–æ—à–∏–π DevOps –Ω–µ —Ç–æ–ª—å–∫–æ –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –Ω–∞–¥—ë–∂–Ω–æ–π, –Ω–æ –∏ —Å–ª–µ–¥–∏—Ç, —á—Ç–æ–±—ã –æ–Ω–∞ –Ω–µ —Å—Ç–æ–∏–ª–∞ –∫–æ–º–ø–∞–Ω–∏–∏ –ª–∏—à–Ω–∏—Ö —Ç—ã—Å—è—á –¥–æ–ª–ª–∞—Ä–æ–≤ –≤ –º–µ—Å—è—Ü.

## üìå –°–Ω–æ—Å–∫–∏

- Kubecost: https://kubecost.com/  
- AWS Spot Best Practices: https://aws.amazon.com/ec2/spot/  
- VPA –Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º —Å HPA –ø–æ CPU/Memory ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –ª–∏–±–æ —Ç–æ, –ª–∏–±–æ –¥—Ä—É–≥–æ–µ.
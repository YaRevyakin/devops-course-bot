---
tags:
  - mod6
---
# Disaster Recovery

**Disaster Recovery (DR)** ‚Äî —ç—Ç–æ –ø–ª–∞–Ω –∏ –Ω–∞–±–æ—Ä –ø—Ä–æ—Ü–µ–¥—É—Ä –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ø–æ—Å–ª–µ –∫—Ä—É–ø–Ω–æ–≥–æ —Å–±–æ—è: –ø–æ–∂–∞—Ä–∞, DDoS, —É—Ç–µ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö, —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏. –¶–µ–ª—å ‚Äî –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å **RTO** (–≤—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è) –∏ **RPO** (–ø–æ—Ç–µ—Ä—é –¥–∞–Ω–Ω—ã—Ö).
## üîë –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å —Å–µ—Ç–∏: FHRP –∏ Keepalived

- **FHRP (First Hop Redundancy Protocol)** ‚Äî —Å–µ–º–µ–π—Å—Ç–≤–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è —à–ª—é–∑–∞  
  - –ü—Ä–∏–º–µ—Ä—ã: VRRP, HSRP, GLBP  
- **Keepalived** ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è VRRP –¥–ª—è Linux  
  - –°–æ–∑–¥–∞—ë—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π IP (VIP), –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏ –ø—Ä–∏ —Å–±–æ–µ  
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã—Ö –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–æ–≤ (Nginx, HAProxy)

–ü—Ä–∏–º–µ—Ä:  
‚Üí –î–≤–∞ —Å–µ—Ä–≤–µ—Ä–∞ —Å Keepalived ‚Üí VIP `192.168.10.100` ‚Üí –µ—Å–ª–∏ master —É–ø–∞–¥—ë—Ç, backup –≤–æ–∑—å–º—ë—Ç VIP –∑–∞ 1‚Äì3 —Å–µ–∫—É–Ω–¥—ã.

> –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç—å —Å–µ—Ç–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞** –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è DNS.
### 2. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **PostgreSQL**: `pg_dump`, `pg_basebackup`, WAL-–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ  
- **MySQL**: `mysqldump`, `xtrabackup`, binlog replication  
- **MongoDB**: `mongodump`, replica set + oplog  
- **–í–∞–∂–Ω–æ**: –±—ç–∫–∞–ø –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–º** (consistent snapshot)
#### –§–∞–π–ª—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **rsync** + cron ‚Üí –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–æ–ø–∏–∏  
- **BorgBackup** –∏–ª–∏ **Restic** ‚Üí –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, —Å–∂–∞—Ç–∏–µ  
- **–ö–æ–Ω—Ñ–∏–≥–∏** ‚Äî —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Git (IaC), –Ω–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∞—Ä—Ö–∏–≤—ã
#### –•—Ä–∞–Ω–µ–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤
- **3-2-1 –ø—Ä–∞–≤–∏–ª–æ**:  
  - 3 –∫–æ–ø–∏–∏ –¥–∞–Ω–Ω—ã—Ö  
  - 2 —Ä–∞–∑–Ω—ã—Ö –Ω–æ—Å–∏—Ç–µ–ª—è  
  - 1 –≤–Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–µ—Å—Ç–∞ (–æ–±–ª–∞–∫–æ, offsite)
## üîÑ –ö–∞–∫ —ç—Ç–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ DevOps?

- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: —Å–∫—Ä–∏–ø—Ç—ã –±—ç–∫–∞–ø–∞ ‚Üí CI/CD ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏  
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DR**: —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ ¬´fire drills¬ª ‚Äî –ø–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞  
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**: –≤—Å–µ –±—ç–∫–∞–ø—ã —à–∏—Ñ—Ä—É—é—Ç—Å—è (–∫–ª—é—á –Ω–µ –≤ —Ç–æ–º –∂–µ –º–µ—Å—Ç–µ!)  
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –∞–ª–µ—Ä—Ç, –µ—Å–ª–∏ –±—ç–∫–∞–ø –Ω–µ —Å–æ–∑–¥–∞–ª—Å—è
## ‚ö†Ô∏è –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

- ‚ùå ¬´–ë—ç–∫–∞–ø –µ—Å—Ç—å ‚Üí –≤—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ¬ª  
  ‚Üí –ù—É–∂–Ω–æ **—Ä–µ–≥—É–ª—è—Ä–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**. –ò–Ω–∞—á–µ –≤ –¥–µ–Ω—å X –æ–∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –±—ç–∫–∞–ø –±–∏—Ç—ã–π.
- ‚ùå ¬´–•—Ä–∞–Ω—é –±—ç–∫–∞–ø –Ω–∞ —Ç–æ–º –∂–µ —Å–µ—Ä–≤–µ—Ä–µ¬ª  
  ‚Üí –ü—Ä–∏ —Å–±–æ–µ –¥–∏—Å–∫–∞ ‚Äî –ø–æ—Ç–µ—Ä—è–µ—à—å –∏ –¥–∞–Ω–Ω—ã–µ, –∏ –±—ç–∫–∞–ø.
- ‚ùå ¬´–ò—Å–ø–æ–ª—å–∑—É—é —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–µ–≥–∏–æ–Ω –≤ –æ–±–ª–∞–∫–µ¬ª  
  ‚Üí –ü—Ä–∏ –∞–≤–∞—Ä–∏–∏ –≤ AZ ‚Äî –≤—Å—ë –ø—Ä–æ–ø–∞–ª–æ. –ò—Å–ø–æ–ª—å–∑—É–π –º—É–ª—å—Ç–∏-—Ä–µ–≥–∏–æ–Ω –¥–ª—è DR.
## üí° –ì–ª–∞–≤–Ω–æ–µ

> Disaster Recovery ‚Äî —ç—Ç–æ –Ω–µ ¬´–∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å¬ª, –∞ **¬´–∫–æ–≥–¥–∞ —Å–ª—É—á–∏—Ç—Å—è¬ª**.  
> –•–æ—Ä–æ—à–∏–π DevOps-–∏–Ω–∂–µ–Ω–µ—Ä –ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ—Ç —Å–∏—Å—Ç–µ–º—É —Ç–∞–∫, —á—Ç–æ–±—ã –µ—ë –º–æ–∂–Ω–æ –±—ã–ª–æ **–ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞ —á–∞—Å—ã, –∞ –Ω–µ –¥–Ω–∏**.

---
### –°–Ω–æ—Å–∫–∏

[^vip]: Virtual IP (VIP) ‚Äî IP-–∞–¥—Ä–µ—Å, –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π –∫ –æ–¥–Ω–æ–º—É —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É —Å–µ—Ä–≤–µ—Ä—É. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤.
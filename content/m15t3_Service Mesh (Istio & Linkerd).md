---
tags: [mod15]
---
# Service Mesh (Istio / Linkerd)

Service Mesh ‚Äî –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Å–ª–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ç–µ–≤—ã–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º –º–µ–∂–¥—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏—Ö –∫–æ–¥–∞. 
–†–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ sidecar-–ø—Ä–æ–∫—Å–∏, –≤–Ω–µ–¥—Ä—è–µ–º—ã–µ —Ä—è–¥–æ–º —Å –∫–∞–∂–¥—ã–º –ø–æ–¥–æ–º. –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏: –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å, –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å.

## üîë –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **Sidecar-–ø—Ä–æ–∫—Å–∏**  
  Istio –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Envoy, Linkerd ‚Äî —Å–≤–æ–π –ª—ë–≥–∫–∏–π –ø—Ä–æ–∫—Å–∏. –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤–µ—Å—å –≤—Ö–æ–¥—è—â–∏–π/–∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫.
- **Control Plane**  
  Istiod (–≤ Istio) –∏–ª–∏ Linkerd Control Plane ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏, –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏.
- **mTLS (mutual TLS)**  
  –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ –±–µ–∑ —É—á–∞—Å—Ç–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.
- **Traffic Management**  
  Canary-—Ä–µ–ª–∏–∑—ã, blue/green, retries, timeouts, circuit breaking ‚Äî –≤—Å—ë —á–µ—Ä–µ–∑ CRD (`VirtualService`, `DestinationRule`).
- **Observability**  
  –ú–µ—Ç—Ä–∏–∫–∏ (Prometheus), —Ç—Ä–µ–π—Å—ã (Jaeger/Zipkin), –ª–æ–≥–∏ ‚Äî —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
## ‚öôÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–º–µ—Å—Ç–µ?

1. –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ mesh –≤–Ω–µ–¥—Ä—è–µ—Ç—Å—è mutating webhook.
2. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–¥–∞ ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è sidecar-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.
3. –í–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –Ω–µ–≥–æ ‚Üí —à–∏—Ñ—Ä—É–µ—Ç—Å—è (mTLS), –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è, –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è.
4. Control Plane —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç –ø–æ–ª–∏—Ç–∏–∫–∏ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã.
5. –ò–Ω–∂–µ–Ω–µ—Ä –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Kubernetes-–º–∞–Ω–∏—Ñ–µ—Å—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 90% —Ç—Ä–∞—Ñ–∏–∫–∞ ‚Üí v1, 10% ‚Üí v2).

‚Üí –ë–µ–∑ Service Mesh ‚Äî –ª–æ–≥–∏–∫–∞ resilience –∏ security –≤ –∫–æ–¥–µ. –° –Ω–∏–º ‚Äî –≤ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ, —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ.
## ‚ö†Ô∏è –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

- ‚ùå ¬´–£—Å—Ç–∞–Ω–æ–≤–∏–ª Istio ‚Äî –∏ –≤—Å—ë —Å–ª–æ–º–∞–ª–æ—Å—å¬ª  
  ‚Üí –í—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–π —Å **permissive mTLS**, –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Ö–æ–¥–∏ –∫ strict. –ò—Å–ø–æ–ª—å–∑—É–π `istioctl analyze`.
- ‚ùå ¬´–ù–µ –∏—Å–∫–ª—é—á–∏–ª —Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–µ–π–º—Å–ø–µ–π—Å—ã (kube-system) –∏–∑ mesh¬ª  
  ‚Üí –≠—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç —Ü–∏–∫–ª—ã –∏ –ø–∞–¥–µ–Ω–∏—è. –ò—Å–ø–æ–ª—å–∑—É–π `sidecar.istio.io/inject: "false"`.
- ‚ùå ¬´–ó–∞–±—ã–ª –ø—Ä–æ overhead ‚Äî CPU/memory –≤—ã—Ä–æ—Å–ª–∏ –Ω–∞ 30%¬ª  
  ‚Üí Service Mesh ‚Äî –Ω–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ. –î–ª—è –º–∞–ª—ã—Ö —Å–∏—Å—Ç–µ–º —á–∞—Å—Ç–æ –∏–∑–±—ã—Ç–æ—á–µ–Ω.
## üí° –ì–ª–∞–≤–Ω–æ–µ

> Service Mesh –æ–ø—Ä–∞–≤–¥–∞–Ω, –∫–æ–≥–¥–∞ —É —Ç–µ–±—è –¥–µ—Å—è—Ç–∫–∏+ —Å–µ—Ä–≤–∏—Å–æ–≤, –∏ —Ç—ã —É—Å—Ç–∞–ª –ø–∏—Å–∞—Ç—å retry-–ª–æ–≥–∏–∫—É –≤ –∫–∞–∂–¥–æ–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–µ.  
> Istio ‚Äî –º–æ—â–Ω—ã–π, –Ω–æ —Å–ª–æ–∂–Ω—ã–π. Linkerd ‚Äî –ø—Ä–æ—Å—Ç–æ–π, –ª—ë–≥–∫–∏–π, ¬´just works¬ª.

## üìå –°–Ω–æ—Å–∫–∏

- `VirtualService` ‚Äî Istio CRD –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞.  
- mTLS –≤ Istio: https://istio.io/latest/docs/concepts/security/  
- Linkerd vs Istio: Linkerd —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –ø—Ä–æ—Å—Ç–æ—Ç–µ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, Istio ‚Äî –Ω–∞ –≥–∏–±–∫–æ—Å—Ç–∏ –∏ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ.
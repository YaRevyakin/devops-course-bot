---
tags:
  - mod4
---

# CI & CD —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º—ã –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –¥–æ—Å—Ç–∞–≤–∫–∏ (CI/CD) –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É—é—Ç —Å–±–æ—Ä–∫—É, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –û–Ω–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –±—ã—Å—Ç—Ä—É—é, –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∏ –Ω–∞–¥—ë–∂–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É –∫–æ–¥–∞ –≤ production.
## üîë –û—Å–Ω–æ–≤–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

### **Jenkins** ‚Äî –≥–∏–±–∫–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å
- –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π —Å–µ—Ä–≤–µ—Ä (on-prem –∏–ª–∏ –≤ –æ–±–ª–∞–∫–µ)  
- –ü–∞–π–ø–ª–∞–π–Ω—ã –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ **Jenkinsfile** (Declarative –∏–ª–∏ Scripted Pipeline)  
- –ë–æ–≥–∞—Ç–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ (>1800)  
- –¢—Ä–µ–±—É–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è: –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–º–µ—Ä (Declarative Pipeline):
```groovy
pipeline {
  agent any
  stages {
    stage('Build') {
      steps { sh 'docker build -t myapp .' }
    }
    stage('Deploy') {
      steps { sh 'kubectl apply -f k8s/' }
    }
  }
}
```
### **GitLab CI** ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

- –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ñ–∞–π–ª **`.gitlab-ci.yml`** –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **runners** (–º–æ–∂–Ω–æ —Å–≤–æ–∏ –∏–ª–∏ shared)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç environments, approvals, security scanning

–ü—Ä–∏–º–µ—Ä:
```yaml
stages:
  - build
  - deploy

build:
  stage: build
  script:
    - docker build -t $CI_REGISTRY_IMAGE .
    - docker push $CI_REGISTRY_IMAGE

deploy:
  stage: deploy
  script:
    - kubectl set image deployment/web app=$CI_REGISTRY_IMAGE
  environment: production
```
### **GitHub Actions** ‚Äî –ø—Ä–æ—Å—Ç–æ—Ç–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

- –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ **workflows** –≤ `.github/workflows/`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **actions** (–≥–æ—Ç–æ–≤—ã–µ —à–∞–≥–∏ –∏–∑ Marketplace)
- –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤

–ü—Ä–∏–º–µ—Ä:
```yaml
name: CI/CD
on: [push]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: docker build -t myapp .
      - run: |
          echo "$DOCKERHUB_TOKEN" | docker login --username ${{ secrets.DOCKERHUB_USERNAME }} --password-stdin
          docker push myuser/myapp
```
### **Argo CD** ‚Äî GitOps –¥–ª—è Kubernetes

- –†–µ–∞–ª–∏–∑—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø **GitOps**: –∂–µ–ª–∞–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ Git
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º
- –í–∏–∑—É–∞–ª—å–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ + health-check‚Äô–∏

> Argo CD –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç CI ‚Äî –æ–Ω –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ **CD**.  
> CI (—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞) –¥–µ–ª–∞–µ—Ç—Å—è –≤ Jenkins/GitLab/GitHub ‚Üí Argo CD –¥–µ–ø–ª–æ–∏—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã.
## üîÑ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

| –°–∏—Å—Ç–µ–º–∞       | –ì–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç        | –Ø–∑—ã–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ | –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è                          |
|--------------|---------------------|-------------------|----------------------------------------|
| **Jenkins**  | –°–≤–æ–π —Å–µ—Ä–≤–µ—Ä         | Groovy            | –°–ª–æ–∂–Ω—ã–µ, –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø–∞–π–ø–ª–∞–π–Ω—ã          |
| **GitLab CI**| –í—Å—Ç—Ä–æ–µ–Ω–æ –≤ GitLab   | YAML              | –ö–æ–º–∞–Ω–¥—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ GitLab          |
| **GitHub Actions**| –í—Å—Ç—Ä–æ–µ–Ω–æ –≤ GitHub | YAML              | Open-source, GitHub-–ø—Ä–æ–µ–∫—Ç—ã           |
| **Argo CD**  | Kubernetes-–∫–ª–∞—Å—Ç–µ—Ä  | YAML (–≤ Git)      | GitOps, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ K8s-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π|
## ‚ö†Ô∏è –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

- ‚ùå ¬´–Ø –∏—Å–ø–æ–ª—å–∑—É—é Argo CD –≤–º–µ—Å—Ç–æ CI¬ª  
    ‚Üí Argo CD –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑—ã. –ù—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π CI –¥–ª—è —ç—Ç–æ–≥–æ.
- ‚ùå ¬´–•—Ä–∞–Ω—é —Å–µ–∫—Ä–µ—Ç—ã –≤ `.gitlab-ci.yml`¬ª  
    ‚Üí –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π **Variables** (GitLab) / **Secrets** (GitHub).
- ‚ùå ¬´–ü–∞–π–ø–ª–∞–π–Ω –±–µ–∑ —Ç–µ—Å—Ç–æ–≤¬ª  
    ‚Üí CI –±–µ–∑ —Ç–µ—Å—Ç–æ–≤ ‚Äî –ø—Ä–æ—Å—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è, –∞ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—è –∫–∞—á–µ—Å—Ç–≤–∞.
## üí° –ì–ª–∞–≤–Ω–æ–µ

> –í—ã–±–æ—Ä CI/CD –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã:
> 
> - –£–∂–µ –≤ GitLab? ‚Üí GitLab CI
> - –ü—Ä–æ–µ–∫—Ç –Ω–∞ GitHub? ‚Üí GitHub Actions
> - –ú–Ω–æ–≥–æ –∫–∞—Å—Ç–æ–º–Ω–æ–π –ª–æ–≥–∏–∫–∏? ‚Üí Jenkins
> - Kubernetes + GitOps? ‚Üí Argo CD
> 
> –ì–ª–∞–≤–Ω–æ–µ ‚Äî **–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë**, —á—Ç–æ –º–æ–∂–Ω–æ, –∏ **–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–µ–ø–ª–æ–∏—Ç—å –≤—Ä—É—á–Ω—É—é**.

---
### –°–Ω–æ—Å–∫–∏

[^gitops]: GitOps ‚Äî –ø–æ–¥—Ö–æ–¥, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º Git —è–≤–ª—è–µ—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –ø—Ä–∞–≤–¥—ã –¥–ª—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. Argo CD —Å–ª–µ–¥–∏—Ç, —á—Ç–æ–±—ã –∫–ª–∞—Å—Ç–µ—Ä –≤—Å–µ–≥–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª —Å–æ—Å—Ç–æ—è–Ω–∏—é –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.